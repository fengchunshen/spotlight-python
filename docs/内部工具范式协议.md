### 一、 核心设计理念
**原生工具 (Native Tool)** 指直接运行在python内部、具有高计算密度或需调用本地资源的逻辑模块。

+ **适用场景**：深度搜索 (DeepSearch)、本地知识库检索 (RAG)、代码沙箱 (CodeSandbox)、复杂数据分析。
+ **核心特征**：
    - **代码优先**：定义与逻辑均由 Python 代码控制。
    - **状态有感**：可访问内存中的全局状态或上下文。
    - **高权限**：直接运行在服务端环境（需严格代码审查）。



### 2. 架构原则：代码驱动，镜像映射
为解决“Java 定义与 Python 代码脱节”的问题，本协议采用**代码优先生成 Schema**策略。

+ **Python 侧**：开发者在 Python 代码中通过 Pydantic 定义输入参数。这是唯一的真理来源。
+ **RuoYi 侧**：数据库 `sys_ai_plugin` 仅作为**元数据镜像**。它存储 Python 生成的 JSON Schema，供 LLM 读取，但不负责定义的修改。

****

### **二、 数据库设计**
**复用**`**sys_ai_plugin**`** 表，通过一个字段来区分类型。**

| **<font style="color:rgb(27, 28, 29);">字段</font>** | **<font style="color:rgb(27, 28, 29);">外部插件 (External)</font>** | **<font style="color:rgb(27, 28, 29);">内部工具 (Native)</font>** |
| --- | --- | --- |
| `<font style="color:rgb(68, 71, 70);">type</font>` | `<font style="color:rgb(68, 71, 70);">HTTP</font>` | `**<font style="color:rgb(68, 71, 70);">NATIVE</font>**` |
| `<font style="color:rgb(68, 71, 70);">name</font>` | `<font style="color:rgb(68, 71, 70);">search_qichacha</font>` | `<font style="color:rgb(68, 71, 70);">deep_search</font>` |
| `<font style="color:rgb(68, 71, 70);">parameter_schema</font>` | <font style="color:rgb(27, 28, 29);">JSON Schema</font> | <font style="color:rgb(27, 28, 29);">JSON Schema (必须与 Python 代码的参数对齐)</font> |
| `<font style="color:rgb(68, 71, 70);">execution_config</font>` | `<font style="color:rgb(68, 71, 70);">{url: "...", method: "GET"}</font>` | `**<font style="color:rgb(68, 71, 70);">{ "class_name": "DeepSearchTool" }</font>**` |


